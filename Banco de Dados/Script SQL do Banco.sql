-- MySQL Script generated by MySQL Workbench
-- Thu May 24 15:53:44 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema db_over_system
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema db_over_system
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `db_over_system` DEFAULT CHARACTER SET utf8 ;
USE `db_over_system` ;

-- -----------------------------------------------------
-- Table `db_over_system`.`CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`CLIENTE` (
  `idcliente` INT NOT NULL AUTO_INCREMENT,
  `nome_fantasia` VARCHAR(85) NOT NULL,
  `cnpj` VARCHAR(18) NOT NULL,
  `inscricao_estadual` VARCHAR(13) NOT NULL,
  `servico_contratado` VARCHAR(45) NOT NULL,
  `quantidade` VARCHAR(20) NOT NULL,
  `valor_servico` DECIMAL(9,2) NOT NULL,
  `data_adesao` DATE NOT NULL,
  `telefone` VARCHAR(15) NOT NULL,
  `cep` VARCHAR(9) NOT NULL,
  `endereco` VARCHAR(100) NOT NULL,
  `cidade` VARCHAR(45) NOT NULL,
  `uf` VARCHAR(2) NOT NULL,
  `bairro` VARCHAR(60) NOT NULL,
  `email` VARCHAR(35) NULL,
  `descricao` VARCHAR(45) NULL,
  PRIMARY KEY (`idcliente`),
  UNIQUE INDEX `idCLIENTE_UNIQUE` (`idcliente` ASC),
  UNIQUE INDEX `CNPJ_UNIQUE` (`cnpj` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`PERFIL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`PERFIL` (
  `idperfil` INT NOT NULL AUTO_INCREMENT,
  `perfil` VARCHAR(45) NOT NULL,
  `status` INT(1) NOT NULL,
  PRIMARY KEY (`idperfil`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`USUARIO` (
  `idusuario` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NOT NULL,
  `senha` VARCHAR(45) NOT NULL,
  `perfil_idperfil` INT NOT NULL,
  PRIMARY KEY (`idusuario`),
  UNIQUE INDEX `idUSUARIO_UNIQUE` (`idusuario` ASC),
  UNIQUE INDEX `USERNAME_UNIQUE` (`username` ASC),
  INDEX `fk_USUARIO_PERFIL1_idx` (`perfil_idperfil` ASC),
  CONSTRAINT `fk_USUARIO_PERFIL1`
    FOREIGN KEY (`perfil_idperfil`)
    REFERENCES `db_over_system`.`PERFIL` (`idperfil`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`FUNCIONARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`FUNCIONARIO` (
  `idfuncionario` INT NOT NULL AUTO_INCREMENT,
  `cpf` VARCHAR(14) NOT NULL,
  `nome` VARCHAR(45) NOT NULL,
  `rg` VARCHAR(9) NOT NULL,
  `data_de_nascimento` DATE NOT NULL,
  `sexo` VARCHAR(12) NOT NULL,
  `cargo` VARCHAR(45) NOT NULL,
  `endereco` VARCHAR(100) NOT NULL,
  `telefone` VARCHAR(18) NOT NULL,
  `email` VARCHAR(45) BINARY NULL,
  `usuario_idusuario` INT NULL,
  PRIMARY KEY (`idfuncionario`),
  UNIQUE INDEX `idCADSATRO DE FUNCIONARIO_UNIQUE` (`idfuncionario` ASC),
  INDEX `fk_FUNCIONARIO_USUARIO1_idx` (`usuario_idusuario` ASC),
  UNIQUE INDEX `CPF_UNIQUE` (`cpf` ASC),
  UNIQUE INDEX `RG_UNIQUE` (`rg` ASC),
  CONSTRAINT `fk_FUNCIONARIO_USUARIO1`
    FOREIGN KEY (`usuario_idusuario`)
    REFERENCES `db_over_system`.`USUARIO` (`idusuario`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`PRODUTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`PRODUTO` (
  `idproduto` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `quantidade` INT NOT NULL,
  `valor_unit` DECIMAL(9,2) NOT NULL,
  `categoria` VARCHAR(65) NOT NULL,
  PRIMARY KEY (`idproduto`),
  UNIQUE INDEX `idPRODUTO_UNIQUE` (`idproduto` ASC),
  UNIQUE INDEX `NOME_UNIQUE` (`nome` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`MENU`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`MENU` (
  `idmenu` INT NOT NULL AUTO_INCREMENT,
  `link` VARCHAR(145) NOT NULL,
  `menu` VARCHAR(45) NOT NULL,
  `status` INT(1) NOT NULL,
  `icone` VARCHAR(45) NULL,
  PRIMARY KEY (`idmenu`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`MENU_PERFIL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`MENU_PERFIL` (
  `idmenu` INT NOT NULL,
  `idperfil` INT NOT NULL,
  PRIMARY KEY (`idmenu`, `idperfil`),
  INDEX `fk_MENU_has_PERFIL_PERFIL1_idx` (`idperfil` ASC),
  INDEX `fk_MENU_has_PERFIL_MENU1_idx` (`idmenu` ASC),
  CONSTRAINT `fk_MENU_has_PERFIL_MENU1`
    FOREIGN KEY (`idmenu`)
    REFERENCES `db_over_system`.`MENU` (`idmenu`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_MENU_has_PERFIL_PERFIL1`
    FOREIGN KEY (`idperfil`)
    REFERENCES `db_over_system`.`PERFIL` (`idperfil`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`INSTALACAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`INSTALACAO` (
  `idinstalacao` INT NOT NULL AUTO_INCREMENT,
  `tipo` VARCHAR(145) NOT NULL,
  `valor` DECIMAL(9,2) NOT NULL,
  `data_inicial` DATE NOT NULL,
  `data_final` DATE NOT NULL,
  `cliente_idcliente` INT NOT NULL,
  PRIMARY KEY (`idinstalacao`),
  INDEX `fk_SERVICO_ CLIENTE1_idx` (`cliente_idcliente` ASC),
  CONSTRAINT `fk_SERVICO_ CLIENTE1`
    FOREIGN KEY (`cliente_idcliente`)
    REFERENCES `db_over_system`.`CLIENTE` (`idcliente`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`INSTALACAO_PRODUTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`INSTALACAO_PRODUTO` (
  `idinstalacao` INT NOT NULL,
  `idproduto` INT NOT NULL,
  PRIMARY KEY (`idinstalacao`, `idproduto`),
  INDEX `fk_INSTALACAO_has_PRODUTO_PRODUTO1_idx` (`idproduto` ASC),
  INDEX `fk_INSTALACAO_has_PRODUTO_INSTALACAO1_idx` (`idinstalacao` ASC),
  CONSTRAINT `fk_INSTALACAO_has_PRODUTO_INSTALACAO1`
    FOREIGN KEY (`idinstalacao`)
    REFERENCES `db_over_system`.`INSTALACAO` (`idinstalacao`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_INSTALACAO_has_PRODUTO_PRODUTO1`
    FOREIGN KEY (`idproduto`)
    REFERENCES `db_over_system`.`PRODUTO` (`idproduto`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`INSTALACAO_FUNCIONARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`INSTALACAO_FUNCIONARIO` (
  `idinstalacao` INT NOT NULL,
  `idfuncionario` INT NOT NULL,
  PRIMARY KEY (`idinstalacao`, `idfuncionario`),
  INDEX `fk_INSTALACAO_has_FUNCIONARIO_FUNCIONARIO1_idx` (`idfuncionario` ASC),
  INDEX `fk_INSTALACAO_has_FUNCIONARIO_INSTALACAO1_idx` (`idinstalacao` ASC),
  CONSTRAINT `fk_INSTALACAO_has_FUNCIONARIO_INSTALACAO1`
    FOREIGN KEY (`idinstalacao`)
    REFERENCES `db_over_system`.`INSTALACAO` (`idinstalacao`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_INSTALACAO_has_FUNCIONARIO_FUNCIONARIO1`
    FOREIGN KEY (`idfuncionario`)
    REFERENCES `db_over_system`.`FUNCIONARIO` (`idfuncionario`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `db_over_system`.`LOG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `db_over_system`.`LOG` (
  `idlog` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `data` DATE NOT NULL,
  `funcionario_idfuncionario` INT NOT NULL,
  PRIMARY KEY (`idlog`),
  INDEX `fk_LOG_FUNCIONARIO1_idx` (`funcionario_idfuncionario` ASC),
  CONSTRAINT `fk_LOG_FUNCIONARIO1`
    FOREIGN KEY (`funcionario_idfuncionario`)
    REFERENCES `db_over_system`.`FUNCIONARIO` (`idfuncionario`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
